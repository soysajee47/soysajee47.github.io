<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÅ‡∏™‡∏ô‡∏™‡∏ô‡∏∏‡∏Å üçì</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Kanit', sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 12px;
        }

        /* ‚ïê SCREENS ‚ïê */
        .screen {
            display: none;
            width: 100%;
            max-width: 640px;
            flex-direction: column;
            align-items: center;
            gap: 18px;
        }

        .screen.active {
            display: flex;
        }

        /* ‚ïê LOGO ‚ïê */
        .logo-wrap {
            text-align: center;
            margin-bottom: 4px;
        }

        .logo-main {
            font-size: clamp(2.2rem, 7vw, 3.4rem);
            font-weight: 900;
            background: linear-gradient(135deg, #f093fb 0%, #f5a623 50%, #43e97b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.1;
            letter-spacing: -1px;
        }

        .logo-sub {
            color: rgba(255, 255, 255, .35);
            font-size: .85rem;
            margin-top: 2px;
            letter-spacing: 1px;
        }

        .logo-emoji {
            font-size: 3rem;
            display: block;
            margin-bottom: 6px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-8px)
            }
        }

        /* ‚ïê LOGIN SCREEN ‚ïê */
        #screen-login {
            padding-top: 40px;
        }

        .login-card {
            background: rgba(255, 255, 255, .07);
            border: 1px solid rgba(255, 255, 255, .12);
            border-radius: 24px;
            padding: 32px 28px;
            width: 100%;
            max-width: 380px;
            text-align: center;
            backdrop-filter: blur(12px);
        }

        .login-label {
            color: rgba(255, 255, 255, .6);
            font-size: .95rem;
            margin-bottom: 10px;
            display: block;
        }

        .name-input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, .08);
            border: 2px solid rgba(255, 255, 255, .15);
            border-radius: 14px;
            color: #fff;
            font-family: 'Kanit', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            outline: none;
            text-align: center;
            transition: border-color .2s;
        }

        .name-input::placeholder {
            color: rgba(255, 255, 255, .25);
        }

        .name-input:focus {
            border-color: rgba(240, 147, 251, .6);
        }

        .btn-start {
            margin-top: 16px;
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #f093fb, #f5a623);
            border: none;
            border-radius: 14px;
            color: #fff;
            font-family: 'Kanit', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            letter-spacing: .5px;
            box-shadow: 0 8px 24px rgba(240, 147, 251, .35);
            transition: all .2s;
        }

        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(240, 147, 251, .45);
        }

        .btn-start:disabled {
            opacity: .4;
            cursor: not-allowed;
            transform: none;
        }

        /* ‚ïê LEADERBOARD PREVIEW ‚ïê */
        .lb-preview {
            width: 100%;
            max-width: 380px;
        }

        .lb-title {
            color: rgba(255, 255, 255, .5);
            font-size: .8rem;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 8px;
            text-align: center;
        }

        .lb-row {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, .05);
            border-radius: 12px;
            padding: 8px 14px;
            margin-bottom: 6px;
            border: 1px solid rgba(255, 255, 255, .07);
        }

        .lb-rank {
            color: #f5a623;
            font-weight: 800;
            font-size: .95rem;
            min-width: 24px;
        }

        .lb-name {
            color: #fff;
            font-weight: 600;
            flex: 1;
            font-size: .9rem;
        }

        .lb-time {
            color: #43e97b;
            font-weight: 700;
            font-size: .9rem;
        }

        .lb-stars-sm {
            font-size: .7rem;
            color: #fbd38d;
        }

        .lb-empty {
            color: rgba(255, 255, 255, .25);
            font-size: .85rem;
            text-align: center;
            padding: 12px;
        }

        /* ‚ïê LEVEL SELECT ‚ïê */
        #screen-select {
            padding-top: 20px;
        }

        .player-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            background: rgba(255, 255, 255, .06);
            border: 1px solid rgba(255, 255, 255, .1);
            border-radius: 16px;
            padding: 10px 18px;
        }

        .player-name-tag {
            color: #f5a623;
            font-weight: 700;
            font-size: 1rem;
        }

        .btn-logout {
            background: rgba(255, 255, 255, .07);
            border: 1px solid rgba(255, 255, 255, .1);
            color: rgba(255, 255, 255, .4);
            padding: 5px 14px;
            border-radius: 50px;
            font-family: 'Kanit', sans-serif;
            font-size: .8rem;
            cursor: pointer;
            transition: all .2s;
        }

        .btn-logout:hover {
            color: #fff;
            background: rgba(255, 255, 255, .14);
        }

        .levels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(155px, 1fr));
            gap: 12px;
            width: 100%;
        }

        .level-card {
            background: rgba(255, 255, 255, .07);
            border: 1px solid rgba(255, 255, 255, .1);
            border-radius: 18px;
            padding: 20px 12px;
            text-align: center;
            cursor: pointer;
            transition: all .25s;
            position: relative;
            overflow: hidden;
        }

        .level-card:hover:not(.locked) {
            transform: translateY(-4px);
            background: rgba(255, 255, 255, .13);
            box-shadow: 0 12px 36px rgba(0, 0, 0, .4);
        }

        .level-card.locked {
            opacity: .38;
            cursor: not-allowed;
        }

        .level-card.completed {
            border-color: rgba(72, 187, 120, .4);
        }

        .lv-badge {
            position: absolute;
            top: 9px;
            right: 11px;
            font-size: .6rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: rgba(255, 255, 255, .28);
            text-transform: uppercase;
        }

        .lv-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .lv-name {
            font-size: .95rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 2px;
        }

        .lv-info {
            font-size: .72rem;
            color: rgba(255, 255, 255, .38);
        }

        .lv-stars {
            font-size: .85rem;
            margin-top: 7px;
            letter-spacing: 2px;
        }

        /* ‚ïê GAME SCREEN ‚ïê */
        #screen-game {
            padding-top: 12px;
        }

        .game-head {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }

        .lv-badge-head {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, .08);
            border: 1px solid rgba(255, 255, 255, .1);
            border-radius: 50px;
            padding: 6px 14px;
            color: #fff;
            font-weight: 700;
            font-size: .88rem;
        }

        .stats {
            display: flex;
            gap: 8px;
        }

        .sbox {
            background: rgba(255, 255, 255, .08);
            border: 1px solid rgba(255, 255, 255, .1);
            border-radius: 12px;
            padding: 5px 12px;
            text-align: center;
        }

        .sbox .sl {
            color: rgba(255, 255, 255, .32);
            font-size: .6rem;
            letter-spacing: .8px;
            text-transform: uppercase;
        }

        .sbox .sv {
            color: #fff;
            font-size: 1rem;
            font-weight: 700;
        }

        #tv {
            color: #f5a623;
        }

        #pv {
            color: #43e97b;
        }

        #mv {
            color: #f093fb;
        }

        /* ‚ïê CARD GRID ‚ïê */
        .grid {
            display: grid;
            gap: 9px;
            width: 100%;
        }

        .grid.g4 {
            grid-template-columns: repeat(4, 1fr);
            max-width: 460px;
        }

        .grid.g5 {
            grid-template-columns: repeat(5, 1fr);
            max-width: 560px;
        }

        .card {
            aspect-ratio: 1;
            cursor: pointer;
            perspective: 600px;
            user-select: none;
        }

        .card-inner {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform .42s cubic-bezier(.4, 0, .2, 1);
            border-radius: 13px;
        }

        .card.flipped .card-inner,
        .card.matched .card-inner {
            transform: rotateY(180deg);
        }

        .card-back,
        .card-front {
            position: absolute;
            inset: 0;
            border-radius: 13px;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-back {
            background: linear-gradient(135deg, #2d3748, #4a5568);
            border: 2px solid rgba(255, 255, 255, .1);
            font-size: 1.3rem;
            color: rgba(255, 255, 255, .22);
            box-shadow: 0 4px 14px rgba(0, 0, 0, .4);
            transition: background .2s;
        }

        .card:hover:not(.flipped):not(.matched) .card-back {
            background: linear-gradient(135deg, #3a4f6a, #58697f);
        }

        .card-front {
            background: linear-gradient(135deg, #fff, #f0f4ff);
            transform: rotateY(180deg);
            border: 2px solid rgba(255, 255, 255, .8);
            box-shadow: 0 5px 20px rgba(0, 0, 0, .22);
            font-size: clamp(1.4rem, 3.5vw, 2.1rem);
        }

        .card.matched .card-front {
            background: linear-gradient(135deg, #c6f6d5, #9ae6b4);
            border-color: #48bb78;
            box-shadow: 0 0 16px rgba(72, 187, 120, .5);
            animation: mPop .4s ease;
        }

        @keyframes mPop {
            0% {
                transform: rotateY(180deg) scale(1)
            }

            50% {
                transform: rotateY(180deg) scale(1.14)
            }

            100% {
                transform: rotateY(180deg) scale(1)
            }
        }

        .card.wrong .card-inner {
            animation: shake .4s ease;
        }

        @keyframes shake {

            0%,
            100% {
                transform: rotateY(180deg) translateX(0)
            }

            25% {
                transform: rotateY(180deg) translateX(-6px)
            }

            75% {
                transform: rotateY(180deg) translateX(6px)
            }
        }

        .cbadge {
            position: absolute;
            top: -5px;
            right: -5px;
            z-index: 10;
            background: #e53e3e;
            color: #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: .65rem;
            font-weight: 700;
        }

        .btn-sm {
            background: rgba(255, 255, 255, .07);
            border: 1px solid rgba(255, 255, 255, .12);
            color: rgba(255, 255, 255, .55);
            border-radius: 50px;
            padding: 7px 16px;
            font-family: 'Kanit', sans-serif;
            font-size: .82rem;
            font-weight: 600;
            cursor: pointer;
            transition: all .2s;
        }

        .btn-sm:hover {
            background: rgba(255, 255, 255, .14);
            color: #fff;
        }

        /* ‚ïê WIN OVERLAY ‚ïê */
        #win-ov {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, .86);
            backdrop-filter: blur(8px);
            z-index: 300;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        #win-ov.show {
            display: flex;
        }

        .win-card {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 1px solid rgba(255, 255, 255, .13);
            border-radius: 26px;
            padding: 32px 36px;
            text-align: center;
            max-width: 380px;
            width: 100%;
            box-shadow: 0 28px 72px rgba(0, 0, 0, .6);
            animation: sUp .5s cubic-bezier(.34, 1.56, .64, 1);
        }

        @keyframes sUp {
            from {
                transform: translateY(60px) scale(.8);
                opacity: 0
            }

            to {
                transform: none;
                opacity: 1
            }
        }

        .we {
            font-size: 2.8rem;
            margin-bottom: 5px;
        }

        .wt {
            font-size: 1.7rem;
            font-weight: 800;
            background: linear-gradient(135deg, #f5a623, #f093fb, #43e97b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 4px;
        }

        .ws {
            color: rgba(255, 255, 255, .4);
            font-size: .88rem;
            margin-bottom: 16px;
        }

        .stars-row {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .star {
            font-size: 2.4rem;
            opacity: 0;
            transform: scale(0) rotate(-30deg);
            animation: sPop .5s cubic-bezier(.34, 1.56, .64, 1) forwards;
        }

        .star.grey {
            filter: grayscale(1) brightness(.5);
        }

        .star:nth-child(1) {
            animation-delay: .2s
        }

        .star:nth-child(2) {
            animation-delay: .4s
        }

        .star:nth-child(3) {
            animation-delay: .6s
        }

        @keyframes sPop {
            to {
                opacity: 1;
                transform: scale(1) rotate(0)
            }
        }

        .win-meta {
            display: flex;
            gap: 14px;
            justify-content: center;
            margin-bottom: 10px;
        }

        .wm-box {
            text-align: center;
        }

        .wm-l {
            color: rgba(255, 255, 255, .3);
            font-size: .62rem;
            letter-spacing: .8px;
            text-transform: uppercase;
        }

        .wm-v {
            color: #fff;
            font-size: 1.2rem;
            font-weight: 700;
        }

        .score100 {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #f5a623, #fa709a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 8px 0 4px;
        }

        .btns-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-top: 14px;
        }

        .btn-n {
            padding: 11px 26px;
            border: none;
            border-radius: 50px;
            font-family: 'Kanit', sans-serif;
            font-size: .95rem;
            font-weight: 700;
            cursor: pointer;
            transition: all .2s;
        }

        .btn-next {
            background: linear-gradient(135deg, #43e97b, #38f9d7);
            color: #0f3460;
            box-shadow: 0 6px 18px rgba(67, 233, 123, .35);
        }

        .btn-next:hover {
            transform: translateY(-2px);
        }

        .btn-replay {
            background: linear-gradient(135deg, #f093fb, #f5a623);
            color: #fff;
            box-shadow: 0 6px 18px rgba(240, 147, 251, .35);
        }

        .btn-replay:hover {
            transform: translateY(-2px);
        }

        /* ‚ïê LEADERBOARD SCREEN ‚ïê */
        #screen-lb {
            padding-top: 20px;
        }

        .lb-full {
            width: 100%;
            background: rgba(255, 255, 255, .06);
            border: 1px solid rgba(255, 255, 255, .1);
            border-radius: 20px;
            overflow: hidden;
        }

        .lb-head-row {
            display: grid;
            grid-template-columns: 36px 1fr 90px 70px;
            gap: 8px;
            padding: 10px 16px;
            background: rgba(255, 255, 255, .05);
            color: rgba(255, 255, 255, .35);
            font-size: .72rem;
            letter-spacing: .8px;
            text-transform: uppercase;
        }

        .lb-data-row {
            display: grid;
            grid-template-columns: 36px 1fr 90px 70px;
            gap: 8px;
            padding: 10px 16px;
            border-top: 1px solid rgba(255, 255, 255, .05);
            align-items: center;
        }

        .lb-data-row:nth-child(2) {
            background: rgba(245, 166, 35, .07);
            border-top-color: rgba(245, 166, 35, .15);
        }

        .lb-data-row .rk {
            font-weight: 800;
            font-size: .95rem;
        }

        .lb-data-row:nth-child(2) .rk {
            color: #f5a623;
        }

        .lb-data-row:nth-child(3) .rk {
            color: #a0aec0;
        }

        .lb-data-row:nth-child(4) .rk {
            color: #cd853f;
        }

        .lb-data-row .nm {
            color: #fff;
            font-weight: 600;
            font-size: .9rem;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .lb-data-row .tm {
            color: #43e97b;
            font-weight: 700;
            font-size: .9rem;
        }

        .lb-data-row .st {
            font-size: .75rem;
        }

        .lb-no-data {
            color: rgba(255, 255, 255, .25);
            text-align: center;
            padding: 24px;
            font-size: .9rem;
        }

        canvas#fw {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 299;
        }

        @media(max-width:400px) {
            .grid.g4 {
                max-width: 320px;
                gap: 7px;
            }

            .grid.g5 {
                grid-template-columns: repeat(4, 1fr);
                max-width: 340px;
            }

            .win-card {
                padding: 24px 20px;
            }
        }
    </style>
</head>

<body>
    <canvas id="fw"></canvas>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="screen active" id="screen-login">
        <div class="logo-wrap" style="padding-top:30px;">
            <span class="logo-emoji">üéÆ</span>
            <div class="logo-main">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÅ‡∏™‡∏ô‡∏™‡∏ô‡∏∏‡∏Å</div>
            <div class="logo-sub">Memory Match Game ¬∑ 5 ‡∏î‡πà‡∏≤‡∏ô</div>
        </div>
        <div class="login-card">
            <label class="login-label">‚úèÔ∏è ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏•‡πà‡∏ô</label>
            <input id="name-input" class="name-input" type="text" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" maxlength="20"
                autocomplete="off">
            <button id="btn-enter" class="btn-start" onclick="enterGame()" disabled>‚ñ∂ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏•‡∏¢!</button>
        </div>
        <div class="lb-preview" id="lb-mini">
            <div class="lb-title">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏£‡πá‡∏ß‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</div>
            <div id="lb-mini-rows"></div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LEVEL SELECT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="screen" id="screen-select">
        <div class="logo-wrap">
            <div class="logo-main" style="font-size:clamp(1.6rem,5vw,2.4rem);">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡πÅ‡∏™‡∏ô‡∏™‡∏ô‡∏∏‡∏Å</div>
        </div>
        <div class="player-bar">
            <div>üë§ <span class="player-name-tag" id="player-tag">-</span></div>
            <button class="btn-logout" onclick="logout()">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠</button>
        </div>
        <div class="levels-grid" id="levels-grid"></div>
        <button class="btn-sm" onclick="showLB()">üèÜ ‡∏î‡∏π‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAME ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="screen" id="screen-game">
        <div class="game-head">
            <div style="display:flex;gap:8px;align-items:center;">
                <button class="btn-sm" onclick="goSelect()">‚Üê ‡πÄ‡∏°‡∏ô‡∏π</button>
                <div class="lv-badge-head" id="lv-badge-head">‡∏î‡πà‡∏≤‡∏ô 1</div>
            </div>
            <div class="stats">
                <div class="sbox">
                    <div class="sl">‚è±</div>
                    <div class="sv" id="tv">0:00</div>
                </div>
                <div class="sbox">
                    <div class="sl">‡∏Ñ‡∏π‡πà</div>
                    <div class="sv" id="pv">0/0</div>
                </div>
                <div class="sbox">
                    <div class="sl">‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                    <div class="sv" id="mv">0</div>
                </div>
            </div>
        </div>
        <div class="grid g4" id="grid"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LEADERBOARD FULL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="screen" id="screen-lb">
        <div class="logo-wrap">
            <div class="logo-main" style="font-size:clamp(1.6rem,5vw,2.4rem);">üèÜ ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</div>
            <div class="logo-sub">‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏£‡∏ö 5 ‡∏î‡πà‡∏≤‡∏ô ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡πá‡∏ß‡∏™‡∏∏‡∏î</div>
        </div>
        <div class="lb-full">
            <div class="lb-head-row"><span>#</span><span>‡∏ä‡∏∑‡πà‡∏≠</span><span>‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°</span><span>‡∏î‡∏≤‡∏ß</span></div>
            <div id="lb-rows"></div>
        </div>
        <button class="btn-sm" onclick="goSelect()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WIN OVERLAY ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="win-ov">
        <div class="win-card">
            <div class="we" id="we">üèÖ</div>
            <div class="wt" id="wt">‡∏ú‡πà‡∏≤‡∏ô‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!</div>
            <div class="ws" id="ws">‡∏î‡πà‡∏≤‡∏ô 1 ‚Äì ‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏î</div>
            <div class="stars-row" id="stars-row"></div>
            <div id="perfect-wrap" style="display:none;">
                <div class="score100">üéä 100 ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô!</div>
                <div style="color:rgba(255,255,255,.4);font-size:.82rem;margin-bottom:6px;">‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á 5 ‡∏î‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!
                </div>
            </div>
            <div class="win-meta">
                <div class="wm-box">
                    <div class="wm-l">‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ</div>
                    <div class="wm-v" id="wm-time">-</div>
                </div>
                <div class="wm-box">
                    <div class="wm-l">‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°</div>
                    <div class="wm-v" id="wm-total">-</div>
                </div>
                <div class="wm-box">
                    <div class="wm-l">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                    <div class="wm-v" id="wm-moves">-</div>
                </div>
            </div>
            <div class="btns-row" id="win-btns"></div>
        </div>
    </div>

    <script>
        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CONFIG ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const LEVELS = [
            { id: 1, name: '‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏™‡∏î', icon: 'üçì', cards: 12, cols: 4, desc: '6 ‡∏Ñ‡∏π‡πà ‚Ä¢ ‡∏ú‡∏•‡πÑ‡∏°‡πâ', items: ['üçì', 'üçá', 'üçä', 'üçé', 'üçå', 'ü••'] },
            { id: 2, name: '‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏´‡∏ß‡∏≤‡∏ô', icon: 'üçí', cards: 12, cols: 4, desc: '6 ‡∏Ñ‡∏π‡πà ‚Ä¢ ‡∏ú‡∏•‡πÑ‡∏°‡πâ', items: ['üçí', 'üçç', 'üçâ', 'ü•≠', 'üçê', 'ü•ù'] },
            { id: 3, name: '‡πÇ‡∏•‡∏Å‡∏™‡∏±‡∏ï‡∏ß‡πå', icon: 'üêØ', cards: 16, cols: 4, desc: '8 ‡∏Ñ‡∏π‡πà ‚Ä¢ ‡∏™‡∏±‡∏ï‡∏ß‡πå', items: ['üêÑ', 'üêØ', 'üêä', 'üêï', 'üê±', 'ü¶ú', 'ü¶≠', 'ü¶ê'] },
            { id: 4, name: '‡∏°‡∏¥‡∏Å‡∏ã‡πå‡∏™‡∏∏‡∏î‡∏°‡∏±‡∏ô', icon: 'ü¶Å', cards: 20, cols: 5, desc: '10 ‡∏Ñ‡∏π‡πà ‚Ä¢ ‡∏ú‡∏•‡πÑ‡∏°‡πâ+‡∏™‡∏±‡∏ï‡∏ß‡πå', items: ['üçì', 'üçä', 'ü••', 'ü•≠', 'üçé', 'üê±', 'ü¶Å', 'üê¨', 'üêÉ', 'ü¶Ä'] },
            { id: 5, name: '‡∏ú‡∏±‡∏Å‡∏™‡∏î‡πÉ‡∏™', icon: 'ü•ï', cards: 16, cols: 4, desc: '8 ‡∏Ñ‡∏π‡πà ‚Ä¢ ‡∏ú‡∏±‡∏Å', items: ['ü•í', 'ü•¨', 'ü•ï', 'ü•¶', 'üåø', 'üçÖ', 'üçÜ', 'üçÉ'] }
        ];
        const FLIP_BACK = 1000;

        // Star thresholds: [3-star max, 2-star max] in seconds
        function getStarCount(lvId, secs) {
            if (lvId <= 2) return secs <= 50 ? 3 : secs <= 60 ? 2 : 1;
            return secs <= 70 ? 3 : secs <= 90 ? 2 : 1; // 1m10s / 1m30s
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STATE ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        let playerName = '';
        let completedLevels = new Set();
        let levelStars = {};       // {lvId: starCount}
        let sessionTimes = {};     // {lvId: seconds}
        let currentLevel = null;
        let flipped = [], matched = 0, moves = 0, totalPairs = 0;
        let canFlip = true, timerInt = null, seconds = 0;
        let particles = [], fwInt = null;

        function loadStorage() {
            const saved = localStorage.getItem('ml_completed_v2');
            if (saved) completedLevels = new Set(JSON.parse(saved));
            const stars = localStorage.getItem('ml_stars');
            if (stars) levelStars = JSON.parse(stars);
            const pname = localStorage.getItem('ml_player');
            if (pname) playerName = pname;
        }
        function saveStorage() {
            localStorage.setItem('ml_completed_v2', JSON.stringify([...completedLevels]));
            localStorage.setItem('ml_stars', JSON.stringify(levelStars));
            localStorage.setItem('ml_player', playerName);
        }
        function getLeaderboard() {
            return JSON.parse(localStorage.getItem('ml_leaderboard') || '[]');
        }
        function saveLeaderboard(lb) {
            localStorage.setItem('ml_leaderboard', JSON.stringify(lb));
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LOGIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        loadStorage();
        const nameInput = document.getElementById('name-input');
        const btnEnter = document.getElementById('btn-enter');
        nameInput.addEventListener('input', () => {
            btnEnter.disabled = nameInput.value.trim().length < 2;
        });
        nameInput.addEventListener('keydown', e => { if (e.key === 'Enter' && !btnEnter.disabled) enterGame(); });
        if (playerName) { nameInput.value = playerName; btnEnter.disabled = false; }
        renderLBMini();

        function enterGame() {
            const name = nameInput.value.trim();
            if (name.length < 2) return;
            playerName = name;
            sessionTimes = {};
            saveStorage();
            renderSelect();
            showScreen('screen-select');
        }
        function logout() {
            playerName = '';
            nameInput.value = '';
            sessionTimes = {};
            completedLevels.clear();
            levelStars = {};
            saveStorage();

            showScreen('screen-login');
            btnEnter.disabled = true;
            renderLBMini();
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LEADERBOARD ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderLBMini() {
            const lb = getLeaderboard();
            const el = document.getElementById('lb-mini-rows');
            if (lb.length === 0) { el.innerHTML = '<div class="lb-empty">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏£‡∏ö 5 ‡∏î‡πà‡∏≤‡∏ô</div>'; return; }
            el.innerHTML = lb.slice(0, 5).map((r, i) => `
        <div class="lb-row">
            <span class="lb-rank">${i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : i + 1}</span>
            <span class="lb-name">${r.name}</span>
            <span class="lb-time">${fmtTime(r.total)}</span>
            <span class="lb-stars-sm">${'‚òÖ'.repeat(r.stars)}${'‚òÜ'.repeat(Math.max(0, 15 - r.stars))}</span>
        </div>`).join('');
        }
        function renderLBFull() {
            const lb = getLeaderboard();
            const el = document.getElementById('lb-rows');
            if (lb.length === 0) { el.innerHTML = '<div class="lb-no-data">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏£‡∏ö 5 ‡∏î‡πà‡∏≤‡∏ô<br>‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÅ‡∏£‡∏Å‡πÑ‡∏î‡πâ!</div>'; return; }
            el.innerHTML = lb.map((r, i) => `
        <div class="lb-data-row">
            <span class="rk">${i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : i + 1}</span>
            <span class="nm">${r.name}</span>
            <span class="tm">${fmtTime(r.total)}</span>
            <span class="st">${'‚≠ê'.repeat(Math.min(r.stars, 15))}</span>
        </div>`).join('');
        }
        function showLB() { renderLBFull(); showScreen('screen-lb'); }

        function recordLeaderboard(totalSecs, totalStars) {
            const lb = getLeaderboard();
            lb.push({ name: playerName, total: totalSecs, stars: totalStars, date: new Date().toLocaleDateString('th-TH') });
            lb.sort((a, b) => a.total - b.total);
            saveLeaderboard(lb.slice(0, 50));
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LEVEL SELECT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function renderSelect() {
            document.getElementById('player-tag').textContent = playerName;
            const grid = document.getElementById('levels-grid');
            grid.innerHTML = '';
            const maxUnlocked = completedLevels.size > 0 ? Math.max(...completedLevels) : 0;
            LEVELS.forEach(lv => {
                const done = completedLevels.has(lv.id);
                const locked = lv.id > maxUnlocked + 1;
                const stars = levelStars[lv.id] || 0;
                const div = document.createElement('div');
                div.className = 'level-card' + (done ? ' completed' : '') + (locked ? ' locked' : '');
                div.innerHTML = `
            <div class="lv-badge">LV ${lv.id}</div>
            <div class="lv-icon">${lv.icon}</div>
            <div class="lv-name">${lv.name}</div>
            <div class="lv-info">${lv.desc}</div>
            <div class="lv-stars" style="${done ? 'color:#43e97b' : 'color:#fbd38d'}">${locked ? 'üîí' : (done ? '‚òÖ'.repeat(stars) + '‚òÜ'.repeat(3 - stars) : '‚òÜ‚òÜ‚òÜ')}</div>`;
                if (!locked) div.onclick = () => startLevel(lv);
                grid.appendChild(div);
            });
        }
        function goSelect() { stopTimer(); renderSelect(); showScreen('screen-select'); }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê GAME LOGIC ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function startLevel(lv) {
            currentLevel = lv;
            flipped = []; matched = 0; moves = 0; canFlip = true; seconds = 0;
            totalPairs = lv.items.length;
            stopTimer();
            document.getElementById('win-ov').classList.remove('show');
            document.getElementById('lv-badge-head').textContent = `‡∏î‡πà‡∏≤‡∏ô ${lv.id} ‚Äì ${lv.name}`;
            document.getElementById('pv').textContent = `0/${totalPairs}`;
            document.getElementById('mv').textContent = '0';
            document.getElementById('tv').textContent = '0:00';

            const grid = document.getElementById('grid');
            grid.className = 'grid ' + (lv.cols === 5 ? 'g5' : 'g4');
            const deck = shuffle([...lv.items, ...lv.items]);
            grid.innerHTML = '';
            deck.forEach((emoji, idx) => {
                const c = document.createElement('div');
                c.className = 'card'; c.dataset.emoji = emoji; c.dataset.idx = idx;
                c.innerHTML = `<div class="card-inner"><div class="card-back">?</div><div class="card-front">${emoji}</div></div>`;
                c.addEventListener('click', () => onFlip(c));
                grid.appendChild(c);
            });
            showScreen('screen-game');
            startTimer();
        }

        function onFlip(card) {
            if (!canFlip || card.classList.contains('flipped') || card.classList.contains('matched') || flipped.length >= 2) return;
            card.classList.add('flipped'); flipped.push(card);
            if (flipped.length === 2) { moves++; document.getElementById('mv').textContent = moves; canFlip = false; checkPair(); }
        }

        function checkPair() {
            const [a, b] = flipped;
            if (a.dataset.emoji === b.dataset.emoji) {
                setTimeout(() => {
                    a.classList.add('matched'); b.classList.add('matched');
                    matched++;
                    document.getElementById('pv').textContent = `${matched}/${totalPairs}`;
                    flipped = []; canFlip = true;
                    if (matched === totalPairs) onWin();
                }, 350);
            } else {
                a.classList.add('wrong'); b.classList.add('wrong');
                addBadge(a); addBadge(b);
                setTimeout(() => {
                    removeBadge(a); removeBadge(b);
                    a.classList.remove('flipped', 'wrong'); b.classList.remove('flipped', 'wrong');
                    flipped = []; canFlip = true;
                }, FLIP_BACK);
            }
        }
        function addBadge(c) { removeBadge(c); const b = document.createElement('div'); b.className = 'cbadge'; b.textContent = '1'; c.style.position = 'relative'; c.appendChild(b); }
        function removeBadge(c) { const b = c.querySelector('.cbadge'); if (b) b.remove(); }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê WIN ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function onWin() {
            stopTimer();
            sessionTimes[currentLevel.id] = seconds;
            const starsEarned = getStarCount(currentLevel.id, seconds);

            // Update best stars
            if (!levelStars[currentLevel.id] || starsEarned > levelStars[currentLevel.id])
                levelStars[currentLevel.id] = starsEarned;

            // Mark completed (progressively unlock up to this level)
            for (let i = 1; i <= currentLevel.id; i++) completedLevels.add(i);
            saveStorage();

            const totalSecs = Object.values(sessionTimes).reduce((a, b) => a + b, 0);
            const totalStarsSession = Object.values(sessionTimes).reduce((acc, s, idx, arr) => {
                const lvId = Object.keys(sessionTimes)[idx];
                return acc + getStarCount(Number(lvId), s);
            }, 0);

            const allDone = LEVELS.every(lv => completedLevels.has(lv.id)) && Object.keys(sessionTimes).length === 5;
            const nextLv = LEVELS.find(lv => lv.id === currentLevel.id + 1);
            const thisTime = fmtTime(seconds);

            // Stars row
            const starsRow = document.getElementById('stars-row');
            starsRow.innerHTML = '';
            for (let i = 1; i <= 3; i++) {
                const s = document.createElement('span');
                s.className = 'star' + (i > starsEarned ? ' grey' : '');
                s.textContent = '‚≠ê'; starsRow.appendChild(s);
            }

            document.getElementById('we').textContent = allDone ? 'ü•á' : (starsEarned === 3 ? 'üèÜ' : starsEarned === 2 ? 'ü•à' : 'ü•â');
            document.getElementById('wt').textContent = allDone ? 'üéä ‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß! üéä' : (starsEarned === 3 ? '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°!' : starsEarned === 2 ? '‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!' : '‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!');
            document.getElementById('ws').textContent = allDone ? '‡∏Ñ‡∏∏‡∏ì‡∏ú‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á 5 ‡∏î‡πà‡∏≤‡∏ô!' : `‡∏î‡πà‡∏≤‡∏ô ${currentLevel.id} ‚Äì ${currentLevel.name}`;
            document.getElementById('wm-time').textContent = thisTime;
            document.getElementById('wm-total').textContent = fmtTime(totalSecs);
            document.getElementById('wm-moves').textContent = `${moves} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á`;
            document.getElementById('perfect-wrap').style.display = allDone ? 'block' : 'none';

            // Save leaderboard entry when all 5 done
            if (allDone) {
                const totalStars = Object.entries(levelStars).reduce((a, [, v]) => a + v, 0);
                recordLeaderboard(totalSecs, totalStars);
            }

            // Buttons
            const btnDiv = document.getElementById('win-btns');
            btnDiv.innerHTML = '';
            if (nextLv) {
                const nb = document.createElement('button'); nb.className = 'btn-n btn-next';
                nb.textContent = `‚ñ∂ ‡∏î‡πà‡∏≤‡∏ô ${nextLv.id}`;
                nb.onclick = () => { document.getElementById('win-ov').classList.remove('show'); startLevel(nextLv); };
                btnDiv.appendChild(nb);
            }
            const rb = document.createElement('button'); rb.className = 'btn-n btn-replay';
            if (allDone) {
                rb.textContent = 'üè† ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å';
                rb.onclick = () => { document.getElementById('win-ov').classList.remove('show'); renderSelect(); showScreen('screen-select'); };
            } else {
                rb.textContent = 'üîÑ ‡πÄ‡∏•‡πà‡∏ô‡∏î‡πà‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏µ‡∏Å';
                rb.onclick = () => { document.getElementById('win-ov').classList.remove('show'); startLevel(currentLevel); };
            }
            btnDiv.appendChild(rb);

            setTimeout(() => {
                document.getElementById('win-ov').classList.add('show');
                launchFireworks(allDone ? 22 : 8);
            }, 500);
        }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê TIMER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function startTimer() {
            timerInt = setInterval(() => {
                seconds++;
                document.getElementById('tv').textContent = `${Math.floor(seconds / 60)}:${String(seconds % 60).padStart(2, '0')}`;
            }, 1000);
        }
        function stopTimer() { clearInterval(timerInt); timerInt = null; }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HELPERS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        function shuffle(arr) { const a = [...arr]; for (let i = a.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1));[a[i], a[j]] = [a[j], a[i]]; } return a; }
        function fmtTime(s) { return `${Math.floor(s / 60)}:${String(s % 60).padStart(2, '0')}`; }
        function showScreen(id) { document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); document.getElementById(id).classList.add('active'); }

        // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FIREWORKS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
        const fwc = document.getElementById('fw'), fwx = fwc.getContext('2d');
        function rFW() { fwc.width = innerWidth; fwc.height = innerHeight; } rFW(); window.addEventListener('resize', rFW);
        const COLORS = ['#f093fb', '#f5a623', '#43e97b', '#4facfe', '#fa709a', '#fee140', '#a18cd1', '#fbc2eb', '#43c6ac'];
        function rC() { return COLORS[Math.floor(Math.random() * COLORS.length)]; }
        function burst(x, y, n = 55) { for (let i = 0; i < n; i++) { const a = (Math.PI * 2 / n) * i, sp = 2 + Math.random() * 5; particles.push({ x, y, vx: Math.cos(a) * sp, vy: Math.sin(a) * sp, alpha: 1, color: rC(), size: 2 + Math.random() * 3, g: .09 }); } }
        function animFW() {
            fwx.clearRect(0, 0, fwc.width, fwc.height);
            particles.forEach(p => {
                p.x += p.vx; p.y += p.vy; p.vy += p.g; p.alpha -= .015;
                fwx.beginPath(); fwx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                fwx.fillStyle = p.color + Math.floor(p.alpha * 255).toString(16).padStart(2, '0'); fwx.fill();
            });
            particles = particles.filter(p => p.alpha > 0);
            if (particles.length > 0 || fwInt) requestAnimationFrame(animFW);
        }
        function launchFireworks(count = 10) {
            particles = []; let n = 0;
            fwInt = setInterval(() => {
                burst(80 + Math.random() * (innerWidth - 160), 60 + Math.random() * (innerHeight * .55), 65);
                n++; if (n >= count) { clearInterval(fwInt); fwInt = null; }
            }, 280);
            requestAnimationFrame(animFW);
        }
    </script>
</body>

</html>